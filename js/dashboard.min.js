angular.module("dashboard",["ngRoute","ngFileUpload","ngMask","rzModule","ngAnimate","ui.bootstrap","chart.js","ngCookies","ngImageEditor"]),angular.module("dashboard").run(["$rootScope","$location","$cookies","user",function(o,a,e,t){o.$on("$routeChangeStart",function(o,n){var i=e.getObject("user"),r=!1;void 0!=i&&(r=!0,t=i),r||n.isLogin||(e.remove("user"),t=null,a.path("/login"))})}]),angular.module("dashboard").value("user",{id:null,nomeUsuario:null,foto:null,senhaApp:null,dadosCasal:{nome_noiva:null,nome_noivo:null,data_casamento:null},convite_dados:{cerimonia_local:null,cerimonia_end:null,cerimonia_numero:null,cerimonia_bairro:null,cerimonia_cidade:null,cerimonia_uf:null,cerimonia_rota:null,cerimonia_cep:null,cerimonia_hora:null,cerimonia_min:null,noiva_mae:null,noiva_pai:null,noivo_mae:null,noivo_pai:null,noiva_mae_memorian:null,noiva_pai_memorian:null,noivo_mae_memorian:null,noivo_pai_memorian:null},convite_formatacao:{bloco_msg_1:{"font-family":"29"},bloco_msg_2:{"font-family":"29"},bloco_msg_personalizada_style:{"font-family":"29"},bloco_cerimonia:{"font-family":"29"},bloco_nome_dos_noivos:{"font-family":"7"},bloco_pais_noiva:{"font-family":"29"},bloco_pais_noivo:{"font-family":"29"}},recepcao:{festa_igual_cerimonia:null,festa_local:null,festa_end:null,festa_numero:null,festa_bairro:null,festa_uf:null,festa_cidade:null,festa_rota:null,festa_cep:null,haveMoip:!1},saveDate:{modelo:null,mensagem:null},lista_hotel:[],lista_salao:[],lista_presente:[],lista_convidados:null,lista_cardapio:[],lista_presentes_lua_mel:[]}),angular.module("dashboard").config(["$routeProvider",function(o){o.when("/",{redirectTo:"/login"}).when("/dados-do-casal",{templateUrl:"/dashboard/templates/page/dados_casal.html",controller:"dados_casal"}).when("/configurar-convite",{templateUrl:"/dashboard/templates/page/configurar_convite.html",controller:"configurar_convite"}).when("/configurar-convite/2",{templateUrl:"/dashboard/templates/page/configurar_convite2.html",controller:"configurar_convite2"}).when("/configurar-evento",{templateUrl:"/dashboard/templates/page/configurar_evento.html",controller:"configurar_evento"}).when("/cadastrar-convidados",{templateUrl:"/dashboard/templates/page/cadastrar_convidados.html",controller:"cadastrar_convidados"}).when("/save-the-date",{templateUrl:"/dashboard/templates/page/save_the_date.html",controller:"save_date"}).when("/save-the-date/2",{templateUrl:"/dashboard/templates/page/save_the_date2.html",controller:"save_date2"}).when("/enviar-convite",{templateUrl:"/dashboard/templates/page/enviar_convite.html",controller:"enviar_convite"}).when("/enviar-convite/2",{templateUrl:"/dashboard/templates/page/enviar_convite2.html",controller:"enviar_convite2"}).when("/estatisticas",{templateUrl:"/dashboard/templates/page/estatistica.html",controller:"estatistica"}).when("/login",{templateUrl:"/dashboard/templates/page/login.html",controller:"login",controllerAs:"loginCtrl",isLogin:!0}).otherwise({redirectTo:"/login"})}]),angular.module("dashboard").directive("httpPrefix",function(){return{restrict:"A",require:"ngModel",link:function(o,a,e,t){function n(o){return o&&!/^(https?):\/\//i.test(o)&&0!=="http://".indexOf(o)&&0!=="https://".indexOf(o)?(t.$setViewValue("http://"+o),t.$render(),"http://"+o):o}t.$formatters.push(n),t.$parsers.splice(0,0,n)}}}),angular.module("dashboard").directive("navigation",[function(){return{restrict:"E",replace:!0,scope:{menu:"="},templateUrl:"/dashboard/templates/navigation.html"}}]),angular.module("dashboard").directive("onFinishRender",["$timeout",function(o){return{restrict:"A",link:function(a,e,t){a.$last===!0&&o(function(){a.$emit("ngRepeatFinished")})}}}]),angular.module("dashboard").controller("cadastrar_convidados",["$scope","Convidados","user","$cookies",function(o,a,e,t){function n(t){var n,i,r=t.target.files;for(n=0,i=r[n];n!=r.length;++n){var s=new FileReader;i.name;s.onload=function(t){var n=t.target.result,i=XLSX.read(n,{type:"binary"}),r=i.SheetNames;r.forEach(function(t){var n=i.Sheets[t],r=0,s=[];for(z in n)if("!"!==z[0])if(s[r]=n[z].v,2==r){var c='<Convidado xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Email>'+s[1]+"</Email><Id>0</Id><Id_usuario_logado>"+e.id+"</Id_usuario_logado><Nome>"+s[0]+"</Nome><Padrinho>false</Padrinho><Qtde_Acompanhantes>"+s[2]+"</Qtde_Acompanhantes><Senha></Senha></Convidado>";a.setData(c).then(function(a){o.getConvidados()}),r=0,s=[]}else r++})},s.readAsBinaryString(i)}}var i=this;i.setCookie=function(){e.lista_convidados=o.convidado_lista,t.putObject("user",e)},o.getConvidados=function(){null==e.id&&(e=t.getObject("user")),a.getData(e.id).then(function(a){var e=$.parseXML(a);o.convidado_lista=[],$(e).find("Convidado").each(function(){o.convidado_lista.push({Id:$(this).find("Id").text(),nome:$(this).find("Nome").text(),email:$(this).find("Email").text(),convidados:$(this).find("Qtde_Acompanhantes").text(),telefone:$(this).find("Bairro").text()})}),i.setCookie()})},o.removeConvidado=function(t,n){a.remove(e.id,t).then(function(){o.convidado_lista.splice(n,1),i.setCookie()})},o.adicionarConvidado=function(){if(""!=o.convidado_nome&&null!=o.convidado_nome){var t='<Convidado xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Email>'+o.convidado_email+"</Email><Id>0</Id><Id_usuario_logado>"+e.id+"</Id_usuario_logado><Nome>"+o.convidado_nome+"</Nome><Padrinho>false</Padrinho><Qtde_Acompanhantes>"+o.convidado_acompanhantes+"</Qtde_Acompanhantes><Senha></Senha></Convidado>";a.setData(t).then(function(a){o.getConvidados(),o.convidado_nome="",o.convidado_acompanhantes="",o.convidado_email="",o.convidado_telefone="",o.getConvidados()})}},document.getElementById("xlf").addEventListener("change",n,!1),e=t.getObject("user"),null==e.lista_convidados||""==e.lista_convidados?o.getConvidados():o.convidado_lista=e.lista_convidados}]),angular.module("dashboard").controller("configurar_convite",["$scope","ConfiguracaoConvite","user","$cookies",function(o,a,e,t){var n=this;n.setLocalDados=function(){e.convite_dados.cerimonia_local=o.cerimonia_local,e.convite_dados.cerimonia_end=o.cerimonia_end,e.convite_dados.cerimonia_numero=o.cerimonia_numero,e.convite_dados.cerimonia_bairro=o.cerimonia_bairro,e.convite_dados.cerimonia_cidade=o.cerimonia_cidade,e.convite_dados.cerimonia_uf=o.cerimonia_uf,e.convite_dados.cerimonia_rota=o.cerimonia_rota,e.convite_dados.cerimonia_cep=o.cerimonia_cep,e.convite_dados.cerimonia_hora=o.cerimonia_hora,e.convite_dados.cerimonia_min=o.cerimonia_min,e.convite_dados.noiva_mae=o.noiva_mae,e.convite_dados.noiva_pai=o.noiva_pai,e.convite_dados.noivo_mae=o.noivo_mae,e.convite_dados.noivo_pai=o.noivo_pai,e.convite_dados.noiva_mae_memorian=o.noiva_mae_memorian,e.convite_dados.noiva_pai_memorian=o.noiva_pai_memorian,e.convite_dados.noivo_mae_memorian=o.noivo_mae_memorian,e.convite_dados.noivo_pai_memorian=o.noivo_pai_memorian,t.putObject("user",e)},n.getLocalDados=function(){o.cerimonia_local=e.convite_dados.cerimonia_local,o.cerimonia_end=e.convite_dados.cerimonia_end,o.cerimonia_numero=e.convite_dados.cerimonia_numero,o.cerimonia_bairro=e.convite_dados.cerimonia_bairro,o.cerimonia_cidade=e.convite_dados.cerimonia_cidade,o.cerimonia_uf=e.convite_dados.cerimonia_uf,o.cerimonia_rota=e.convite_dados.cerimonia_rota,o.cerimonia_cep=e.convite_dados.cerimonia_cep,o.cerimonia_hora=e.convite_dados.cerimonia_hora,o.cerimonia_min=e.convite_dados.cerimonia_min,o.noiva_mae=e.convite_dados.noiva_mae,o.noiva_pai=e.convite_dados.noiva_pai,o.noivo_mae=e.convite_dados.noivo_mae,o.noivo_pai=e.convite_dados.noivo_pai,o.noiva_mae_memorian=e.convite_dados.noiva_mae_memorian,o.noiva_pai_memorian=e.convite_dados.noiva_pai_memorian,o.noivo_mae_memorian=e.convite_dados.noivo_mae_memorian,o.noivo_pai_memorian=e.convite_dados.noivo_pai_memorian},o.consultCEP=function(){var a=o.cerimonia_cep.replace(/\./g,"");a=a.replace(/\-/g,""),a.length>7&&$.ajax({url:"http://api.postmon.com.br/v1/cep/"+a,success:function(a){o.cerimonia_end=a.logradouro,o.cerimonia_bairro=a.bairro,o.cerimonia_cidade=a.cidade,o.cerimonia_uf=a.estado}})},o.getDadosConvite=function(){a.getData(e.id).then(function(a){var e=$.parseXML(a),t=$(e).find("Horario_cerimonia").text().split(":");o.cerimonia_local=$(e).find("Local_cerimonia").text(),o.cerimonia_end=$(e).find("Endereco").text(),o.cerimonia_numero=$(e).find("Numero").text(),o.cerimonia_bairro=$(e).find("Bairro").text(),o.cerimonia_cidade=$(e).find("Cidade").text(),o.cerimonia_uf=$(e).find("Estado").text(),o.cerimonia_rota=$(e).find("Tracar_rota_local").text(),o.cerimonia_cep=$(e).find("Cep").text(),o.cerimonia_hora=t[0],"00"==t[1]?o.cerimonia_min="0":o.cerimonia_min=t[1],o.noiva_mae=$(e).find("Mae_noiva").text(),o.noiva_pai=$(e).find("Pai_noiva").text(),o.noivo_mae=$(e).find("Mae_noivo").text(),o.noivo_pai=$(e).find("Pai_noivo").text(),o.noiva_mae_memorian=$(e).find("Mae_noiva_in_memoriam").text(),o.noiva_pai_memorian=$(e).find("Pai_noiva_in_memoriam").text(),o.noivo_mae_memorian=$(e).find("Mae_noivo_in_memoriam").text(),o.noivo_pai_memorian=$(e).find("Pai_noivo_in_memoriam").text(),n.setLocalDados()})},o.setDadosConvite=function(){var t=o.cerimonia_hora+":"+o.cerimonia_min,i='<ConfiguracaoConvite xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Bairro>'+o.cerimonia_bairro+"</Bairro><Cep>"+o.cerimonia_cep+"</Cep><Cidade>"+o.cerimonia_cidade+"</Cidade><Endereco>"+o.cerimonia_end+"</Endereco><Estado>"+o.cerimonia_uf+"</Estado><Horario_cerimonia>"+t+"</Horario_cerimonia><Id_usuario_logado>"+e.id+"</Id_usuario_logado><Local_cerimonia>"+o.cerimonia_local+"</Local_cerimonia><Mae_noiva>"+o.noiva_mae+"</Mae_noiva><Mae_noiva_in_memoriam>"+o.noiva_mae_memorian+"</Mae_noiva_in_memoriam><Mae_noivo>"+o.noivo_mae+"</Mae_noivo><Mae_noivo_in_memoriam>"+o.noivo_mae_memorian+"</Mae_noivo_in_memoriam><Msg1></Msg1><Msg2></Msg2><Msg3></Msg3><Msg4></Msg4><Msg5></Msg5><Msg6></Msg6><Numero>"+o.cerimonia_numero+"</Numero><Obs></Obs><Pai_noiva>"+o.noiva_pai+"</Pai_noiva><Pai_noiva_in_memoriam>"+o.noiva_pai_memorian+"</Pai_noiva_in_memoriam><Pai_noivo>"+o.noivo_pai+"</Pai_noivo><Pai_noivo_in_memoriam>"+o.noivo_pai_memorian+"</Pai_noivo_in_memoriam><Pais></Pais><Tracar_rota_local>"+o.cerimonia_rota+"</Tracar_rota_local></ConfiguracaoConvite>";a.setData(i),n.setLocalDados()},e=t.getObject("user"),null==e.convite_dados.cerimonia_local||""==e.convite_dados.cerimonia_local?o.getDadosConvite():n.getLocalDados()}]),angular.module("dashboard").controller("configurar_convite2",["$scope","$http","ConfiguracaoTemplateConvite","user","$sce","$cookies","$route","$filter",function(o,a,e,t,n,i,r,s){var c=this;c.changeBr=function(o){var a=o.replace(/<br>/g,"#");return a},$(window).scroll(function(){try{var o=$("#convites_layout").offset();$(this).scrollTop()<o.top-200?$(".controll").fadeIn(10):$(".controll").fadeOut(10)}catch(a){}}),c.inMemorian=function(o){return"true"==o?" &#10013;":" "},o.showBlocos=[{ativo:!0},{ativo:!1},{ativo:!1},{ativo:!1},{ativo:!1},{ativo:!1},{ativo:!1}],o.setBlocoActive=function(a){for(var e=0;e<o.showBlocos.length;e++)o.showBlocos[e].ativo=!1;o.showBlocos[a].ativo=!0},o.convites=[],a.get("data/convites.json").then(function(a){o.convites=a.data}),a.get("data/fonts.json").then(function(a){o.fonts=a.data}),o.layoutSelecionado,o.bloco_pais_noiva,o.bloco_pais_noivo,o.bloco_msg_1,o.bloco_nome_dos_noivos,o.bloco_msg_2,o.bloco_msg_personalizada_style,o.bloco_cerimonia,o.bloco_msg_personalizada="Este é um texto de referência para a mensagem do seu convite. Para editá-lo clique aqui e reescreva. Se você optar por não ter nenhuma mensagem, basta selecionar o texto e deletar.",c.setMsg=function(){t=i.getObject("user");var a=t.dadosCasal.data_casamento.split("/"),e=a[1]+"/"+a[0]+"/"+a[2];o.conteudo_msg1=n.trustAsHtml("convidam para a cerimônia de casamento dos seus filhos"),o.conteudo_msg2=n.trustAsHtml("a realizar-se às "+s("twoDigits")(t.convite_dados.cerimonia_hora)+":"+s("twoDigits")(t.convite_dados.cerimonia_min)+" horas, dia "+e+", "+t.convite_dados.cerimonia_local),o.conteudo_msg4=n.trustAsHtml("Cerimônia: <br> "+t.convite_dados.cerimonia_local+" <br> "+t.convite_dados.cerimonia_end+", "+t.convite_dados.cerimonia_numero+" - "+t.convite_dados.cerimonia_bairro+" "+t.convite_dados.cerimonia_cidade),o.conteudo_nomecasal=n.trustAsHtml(t.dadosCasal.nome_noiva+" &#38; "+t.dadosCasal.nome_noivo),o.conteudo_pais_noiva=n.trustAsHtml(t.convite_dados.noiva_pai+c.inMemorian(t.convite_dados.noiva_pai_memorian)+" <br> "+t.convite_dados.noiva_mae+c.inMemorian(t.convite_dados.noiva_mae_memorian)),o.conteudo_pais_noivo=n.trustAsHtml(t.convite_dados.noivo_pai+c.inMemorian(t.convite_dados.noivo_pai_memorian)+" <br> "+t.convite_dados.noivo_mae+c.inMemorian(t.convite_dados.noivo_mae_memorian))},c.getTextAlingIndice=function(o){var a="";switch(o){case"right":a=2;break;case"left":a=0;break;case"center":a=1;break;default:a=0}return a},c.getTextAling=function(o){var a="";switch(o){case"2":a="right";break;case"0":a="left";break;case"1":a="center";break;default:a="left"}return a},c.getFonte=function(a){try{var e=o.fonts.SERIF[a]["font-name"];return e}catch(t){try{var n=o.fonts.SANSSERIF[a]["font-name"];return n}catch(t){try{var i=o.fonts.DISPLAY[a]["font-name"];return i}catch(t){try{var r=o.fonts.HANDWRITING[a]["font-name"];return r}catch(t){return null}}}}},o.styleHold=[],o.setFontToBloco=function(a,e){$("."+o.styleHold).css("font-family",a),t.convite_formatacao[o.styleHold]["font-family"]=e},c.removePx=function(o){var a="";return a=o.toString().split("px"),a[0]},o.convite_individual,o.setConvite=function(a,e){o.layoutSelecionado=e,o.convite_individual=a;var t=o.convites[a];o.bloco_pais_noiva=t.bloco_pais_noiva,o.bloco_pais_noivo=t.bloco_pais_noivo,o.bloco_msg_1=t.bloco_msg_1,o.bloco_nome_dos_noivos=t.bloco_nome_dos_noivos,o.bloco_msg_2=t.bloco_msg_2,o.bloco_msg_personalizada_style=t.bloco_msg_personalizada_style,o.bloco_cerimonia=t.bloco_cerimonia},o.getConfiguracaoConvite=function(){null==t.id&&(t=i.getObject("user")),e.getData(t.id).then(function(a){try{a=$.parseXML(a)}catch(e){r.reload()}var n=$(a).find("id_modelo").text();c.setMsg(),"0"==n?(o.setConvite("convite1","./image/convites/convite1.png"),o.setConfiguracaoConvite()):(o.setConvite("convite"+n,"./image/convites/convite"+n+".png"),o.bloco_msg_1["text-align"]=c.getTextAling($(a).find("alinhamento_msg1").text()),o.bloco_msg_2["text-align"]=c.getTextAling($(a).find("alinhamento_msg2").text()),o.bloco_msg_personalizada_style["text-align"]=c.getTextAling($(a).find("alinhamento_msg3").text()),o.bloco_cerimonia["text-align"]=c.getTextAling($(a).find("alinhamento_msg4").text()),o.bloco_nome_dos_noivos["text-align"]=c.getTextAling($(a).find("alinhamento_nomecasal").text()),o.bloco_pais_noiva["text-align"]=c.getTextAling($(a).find("alinhamento_pais_noiva").text()),o.bloco_pais_noivo["text-align"]=c.getTextAling($(a).find("alinhamento_pais_noivo").text()),o.bloco_msg_1.color=$(a).find("cor_msg1").text(),o.bloco_msg_2.color=$(a).find("cor_msg2").text(),o.bloco_msg_personalizada_style.color=$(a).find("cor_msg3").text(),o.bloco_cerimonia.color=$(a).find("cor_msg4").text(),o.bloco_nome_dos_noivos.color=$(a).find("cor_nomecasal").text(),o.bloco_pais_noiva.color=$(a).find("cor_pais_noiva").text(),o.bloco_pais_noivo.color=$(a).find("cor_pais_noivo").text(),o.bloco_msg_1["font-family"]=c.getFonte($(a).find("fonte_msg1").text()),o.bloco_msg_2["font-family"]=c.getFonte($(a).find("fonte_msg2").text()),o.bloco_msg_personalizada_style["font-family"]=c.getFonte($(a).find("fonte_msg3").text()),o.bloco_cerimonia["font-family"]=c.getFonte($(a).find("fonte_msg4").text()),o.bloco_nome_dos_noivos["font-family"]=c.getFonte($(a).find("fonte_nomecasal").text()),o.bloco_pais_noiva["font-family"]=c.getFonte($(a).find("fonte_pais_noiva").text()),o.bloco_pais_noivo["font-family"]=c.getFonte($(a).find("fonte_pais_noivo").text()),o.bloco_msg_1["font-size"]=$(a).find("tamanho_fonte_msg1").text(),o.bloco_msg_2["font-size"]=$(a).find("tamanho_fonte_msg2").text(),o.bloco_msg_personalizada_style["font-size"]=$(a).find("tamanho_fonte_msg3").text(),o.bloco_cerimonia["font-size"]=$(a).find("tamanho_fonte_msg4").text(),o.bloco_nome_dos_noivos["font-size"]=$(a).find("tamanho_nomecasal").text(),o.bloco_pais_noiva["font-size"]=$(a).find("tamanho_fonte_pais_noiva").text(),o.bloco_pais_noivo["font-size"]=$(a).find("tamanho_fonte_pais_noiva").text(),o.bloco_msg_personalizada=$(a).find("conteudo_msg3").text(),t.convite_formatacao.bloco_msg_1["font-family"]=$(a).find("fonte_msg1").text(),t.convite_formatacao.bloco_msg_2["font-family"]=$(a).find("fonte_msg2").text(),t.convite_formatacao.bloco_msg_personalizada_style["font-family"]=$(a).find("fonte_msg3").text(),t.convite_formatacao.bloco_cerimonia["font-family"]=$(a).find("fonte_msg4").text(),t.convite_formatacao.bloco_nome_dos_noivos["font-family"]=$(a).find("fonte_nomecasal").text(),t.convite_formatacao.bloco_pais_noiva["font-family"]=$(a).find("fonte_pais_noiva").text(),t.convite_formatacao.bloco_pais_noivo["font-family"]=$(a).find("fonte_pais_noivo").text())})},o.setConfiguracaoConvite=function(){var a=o.convite_individual.split("convite"),n=a[1],i='<DadosFormatacaoConvite xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><alinhamento_msg1>'+c.getTextAlingIndice(o.bloco_msg_1["text-align"])+"</alinhamento_msg1><alinhamento_msg2>"+c.getTextAlingIndice(o.bloco_msg_2["text-align"])+"</alinhamento_msg2><alinhamento_msg3>"+c.getTextAlingIndice(o.bloco_msg_personalizada_style["text-align"])+"</alinhamento_msg3><alinhamento_msg4>"+c.getTextAlingIndice(o.bloco_cerimonia["text-align"])+"</alinhamento_msg4><alinhamento_nomecasal>"+c.getTextAlingIndice(o.bloco_nome_dos_noivos["text-align"])+"</alinhamento_nomecasal><alinhamento_pais_noiva>"+c.getTextAlingIndice(o.bloco_pais_noiva["text-align"])+"</alinhamento_pais_noiva><alinhamento_pais_noivo>"+c.getTextAlingIndice(o.bloco_pais_noivo["text-align"])+"</alinhamento_pais_noivo><conteudo_msg1>"+c.changeBr(o.conteudo_msg1.toString())+"</conteudo_msg1><conteudo_msg2>"+c.changeBr(o.conteudo_msg2.toString())+"</conteudo_msg2><conteudo_msg3>"+c.changeBr(o.bloco_msg_personalizada.toString())+"</conteudo_msg3><conteudo_msg4>"+c.changeBr(o.conteudo_msg4.toString())+"</conteudo_msg4><conteudo_nomecasal>"+t.dadosCasal.nome_noiva+" &#38; "+t.dadosCasal.nome_noivo+"</conteudo_nomecasal><conteudo_pais_noiva>"+t.convite_dados.noiva_pai+"#"+t.convite_dados.noiva_mae+"</conteudo_pais_noiva><conteudo_pais_noivo>"+t.convite_dados.noivo_pai+"#"+t.convite_dados.noivo_mae+"</conteudo_pais_noivo><cor_msg1>"+o.bloco_msg_1.color+"</cor_msg1><cor_msg2>"+o.bloco_msg_2.color+"</cor_msg2><cor_msg3>"+o.bloco_msg_personalizada_style.color+"</cor_msg3><cor_msg4>"+o.bloco_cerimonia.color+"</cor_msg4><cor_nomecasal>"+o.bloco_nome_dos_noivos.color+"</cor_nomecasal><cor_pais_noiva>"+o.bloco_pais_noiva.color+"</cor_pais_noiva><cor_pais_noivo>"+o.bloco_pais_noivo.color+"</cor_pais_noivo><fonte_msg1>"+t.convite_formatacao.bloco_msg_1["font-family"]+"</fonte_msg1><fonte_msg2>"+t.convite_formatacao.bloco_msg_2["font-family"]+"</fonte_msg2><fonte_msg3>"+t.convite_formatacao.bloco_msg_personalizada_style["font-family"]+"</fonte_msg3><fonte_msg4>"+t.convite_formatacao.bloco_cerimonia["font-family"]+"</fonte_msg4><fonte_nomecasal>"+t.convite_formatacao.bloco_nome_dos_noivos["font-family"]+"</fonte_nomecasal><fonte_pais_noiva>"+t.convite_formatacao.bloco_pais_noiva["font-family"]+"</fonte_pais_noiva><fonte_pais_noivo>"+t.convite_formatacao.bloco_pais_noivo["font-family"]+"</fonte_pais_noivo><id_casal>"+t.id+"</id_casal><id_modelo>"+n+"</id_modelo><tamanho_fonte_msg1>"+c.removePx(o.bloco_msg_1["font-size"])+"</tamanho_fonte_msg1><tamanho_fonte_msg2>"+c.removePx(o.bloco_msg_2["font-size"])+"</tamanho_fonte_msg2><tamanho_fonte_msg3>"+c.removePx(o.bloco_msg_personalizada_style["font-size"])+"</tamanho_fonte_msg3><tamanho_fonte_msg4>"+c.removePx(o.bloco_cerimonia["font-size"])+"</tamanho_fonte_msg4><tamanho_fonte_pais_noiva>"+c.removePx(o.bloco_pais_noiva["font-size"])+"</tamanho_fonte_pais_noiva><tamanho_fonte_pais_noivo>"+c.removePx(o.bloco_pais_noivo["font-size"])+"</tamanho_fonte_pais_noivo><tamanho_nomecasal>"+c.removePx(o.bloco_nome_dos_noivos["font-size"])+"</tamanho_nomecasal></DadosFormatacaoConvite>";e.setData(i)},o.getConfiguracaoConvite()}]),angular.module("dashboard").controller("configurar_evento",["$scope","ConfiguracaoEvento","ListaHoteis","ListaSaloes","LojaPresentes","user","Cardapio","$cookies","PresentesLuaDeMel",function(o,a,e,t,n,i,r,s,c){var l=this;o.PreencherLocal=function(o){i.recepcao.festa_local=o},o.PreencherCep=function(o){i.recepcao.festa_cep=o},o.PreencherNum=function(o){i.recepcao.festa_numero=o},o.produtos=[],o.produtosEscolidos=[],o.getProdutos=function(){c.getData(i.id).then(function(a){var e=$.parseXML(a),t=$(e).find("PresentesLuaDeMel");$.each(t,function(a,e){o.produtos.push({nome:$(e).find("Descricao").text(),urlImage:$(e).find("Url").text(),valor:"R$ "+$(e).find("Valor").text(),id:$(e).find("Id").text(),marcado:!1})})})},o.checkProduto=function(a,e){if(a)o.produtosEscolidos.push({id:e});else{var t;for(t in o.produtosEscolidos)o.produtosEscolidos[t].id==e&&delete o.produtosEscolidos[t]}},o.salvarProdutos=function(){s.putObject("user",i),c.setData().then(function(){})},l.getDadosServico=function(){null==i.id&&(i=s.getObject("user")),o.getDadosEvento(),o.getHoteis(),o.getSaloes(),o.getPresentes(),o.getListaCardapio(),o.getProdutos()},l.cerimoniaRemotoToLocal=function(){i.recepcao.festa_igual_cerimonia=o.festa_igual_cerimonia,i.recepcao.festa_end=o.festa_end,i.recepcao.festa_bairro=o.festa_bairro,i.recepcao.festa_cidade=o.festa_cidade,i.recepcao.festa_rota=o.festa_rota,i.lista_presentes_lua_mel=o.produtos,s.putObject("user",i)},l.getDadosLocal=function(){o.festa_igual_cerimonia=i.recepcao.festa_igual_cerimonia,o.festa_local=i.recepcao.festa_local,o.festa_end=i.recepcao.festa_end,o.festa_numero=i.recepcao.festa_numero,o.festa_bairro=i.recepcao.festa_bairro,o.festa_uf=i.recepcao.festa_uf,o.festa_cidade=i.recepcao.festa_cidade,o.festa_rota=i.recepcao.festa_rota,o.festa_cep=i.recepcao.festa_cep,o.hotel_lista=i.lista_hotel,o.salao_lista=i.lista_salao,o.loja_lista=i.lista_presente,o.lista_cardapio=i.lista_cardapio,o.produtos=i.lista_presentes_lua_mel,1==i.recepcao.haveMoip&&(o.moip__form={display:"none"})},o.getDadosEvento=function(){a.getData(i.id).then(function(a){var e=$.parseXML(a);o.festa_igual_cerimonia=$(e).find("Mesmo_local_cerimonia").text(),o.festa_local=$(e).find("Local_festa").text(),o.festa_end=$(e).find("Endereco").text(),o.festa_numero=$(e).find("Numero").text(),o.festa_bairro=$(e).find("Bairro").text(),o.festa_cidade=$(e).find("Cidade").text(),o.festa_uf=$(e).find("Estado").text(),o.festa_rota=$(e).find("Tracar_rota_local").text(),o.festa_cep=$(e).find("Cep").text(),l.cerimoniaRemotoToLocal()})},o.setDadosEvento=function(){var e='<ConfiguracaoEvento xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Bairro>'+o.festa_bairro+"</Bairro><Cep>"+i.recepcao.festa_cep+"</Cep><Cidade>"+o.festa_cidade+"</Cidade><Endereco>"+o.festa_end+"</Endereco><Estado>"+o.festa_uf+"</Estado><Horario_festa></Horario_festa><Id_usuario_logado>"+i.id+"</Id_usuario_logado><Local_festa>"+i.recepcao.festa_local+"</Local_festa><Mesmo_local_cerimonia>"+o.festa_igual_cerimonia+"</Mesmo_local_cerimonia><Numero>"+i.recepcao.festa_numero+"</Numero><Obs></Obs><Pais></Pais><Tracar_rota_local>"+o.festa_rota+"</Tracar_rota_local></ConfiguracaoEvento>";a.setData(e),l.cerimoniaRemotoToLocal()},o.consultFestaCEP=function(a){var e=a.replace(/\./g,"");e=e.replace(/\-/g,""),e.length>7&&$.ajax({url:"http://api.postmon.com.br/v1/cep/"+e,success:function(a){o.festa_end=a.logradouro,o.festa_bairro=a.bairro,o.festa_cidade=a.cidade,o.festa_uf=a.estado}})},o.consultCEPHotel=function(){var a=o.hotel_cep.replace(/\./g,"");a=a.replace(/\-/g,""),a.length>7&&$.ajax({url:"http://api.postmon.com.br/v1/cep/"+a.toString(),success:function(a){o.hotel_end=a.logradouro,o.hotel_bairro=a.bairro,o.hotel_cidade=a.cidade,o.hotel_uf=a.estado}})},o.getHoteis=function(){e.getData(i.id).then(function(a){var e=$.parseXML(a);o.hotel_lista=[],$(e).find("ConfiguracaoGenericaEndereco").each(function(){o.hotel_lista.push({Id:$(this).find("Id").text(),Local:$(this).find("Nome").text(),Endereco:$(this).find("Endereco").text(),Numero:$(this).find("Numero").text(),Bairro:$(this).find("Bairro").text(),Cidade:$(this).find("Cidade").text()})}),i.lista_hotel=o.hotel_lista})},o.removeHotel=function(a,t){e.remove(i.id,a).then(function(){o.hotel_lista.splice(t,1),i.lista_hotel=o.hotel_lista})},o.adicionarHotel=function(){if(""!=o.hotel_local||null!=o.hotel_local){var a=!0;"nao"==o.hotel_rota&&(a=!1);var t='<ConfiguracaoGenericaEndereco xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Bairro>'+o.hotel_bairro+"</Bairro><Cidade>"+o.hotel_cidade+"</Cidade><CodigoArea></CodigoArea><Email>"+o.hotel_email+"</Email><Endereco>"+o.hotel_end+"</Endereco><Estado>"+o.hotel_uf+"</Estado><Id>0</Id><Id_usuario_logado>"+i.id+"</Id_usuario_logado><Nome>"+o.hotel_local+"</Nome><Numero>"+o.hotel_numero+"</Numero><Obs></Obs><Pais></Pais><Site>"+o.hotel_site+"</Site><Telefone>"+o.hotel_telefone+"</Telefone><TipoLogradouro></TipoLogradouro><Tracar_rota_local>"+a+"</Tracar_rota_local></ConfiguracaoGenericaEndereco>";e.setData(t).then(function(a){o.getHoteis(),o.hotel_local="",o.hotel_cep="",o.hotel_end="",o.hotel_numero="",o.hotel_bairro="",o.hotel_cidade="",o.hotel_uf="",o.hotel_site="",o.hotel_telefone="",o.hotel_email=""})}},o.consultCEPSalao=function(){try{var a=o.salao_cep.replace(/\./g,"");a=a.replace(/\-/g,""),a.length>7&&$.ajax({url:"http://api.postmon.com.br/v1/cep/"+a.toString(),success:function(a){o.salao_end=a.logradouro,o.salao_bairro=a.bairro,o.salao_cidade=a.cidade,o.salao_uf=a.estado}})}catch(e){}},o.getSaloes=function(){t.getData(i.id).then(function(a){var e=$.parseXML(a);o.salao_lista=[],$(e).find("ConfiguracaoGenericaEndereco").each(function(){o.salao_lista.push({Id:$(this).find("Id").text(),Local:$(this).find("Nome").text(),Endereco:$(this).find("Endereco").text(),Numero:$(this).find("Numero").text(),Bairro:$(this).find("Bairro").text(),Cidade:$(this).find("Cidade").text()})}),i.lista_salao=o.salao_lista})},o.removeSalao=function(a,e){t.remove(i.id,a).then(function(a){o.salao_lista.splice(e,1),i.lista_salao=o.salao_lista})},o.adicionarSalao=function(){if(""!=o.salao_local&&null!=o.salao_local){var a=!0;"nao"==o.salao_rota&&(a=!1);var e='<ConfiguracaoGenericaEndereco xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Bairro>'+o.salao_bairro+"</Bairro><Cidade>"+o.salao_cidade+"</Cidade><CodigoArea></CodigoArea><Email>"+o.salao_email+"</Email><Endereco>"+o.salao_end+"</Endereco><Estado>"+o.salao_uf+"</Estado><Id>0</Id><Id_usuario_logado>"+i.id+"</Id_usuario_logado><Nome>"+o.salao_local+"</Nome><Numero>"+o.salao_numero+"</Numero><Obs></Obs><Pais></Pais><Site>"+o.salao_site+"</Site><Telefone>"+o.salao_telefone+"</Telefone><TipoLogradouro></TipoLogradouro><Tracar_rota_local>"+a+"</Tracar_rota_local></ConfiguracaoGenericaEndereco>";t.setData(e).then(function(a){o.getSaloes(),o.salao_local="",o.salao_cep="",o.salao_end="",o.salao_numero="",o.salao_bairro="",o.salao_cidade="",o.salao_uf="",o.salao_site="",o.salao_telefone="",o.salao_email=""})}},o.getPresentes=function(){n.getData(i.id).then(function(a){var e=$.parseXML(a);o.loja_lista=[],$(e).find("ConfiguracaoLojaPresentes").each(function(){o.loja_lista.push({Id:$(this).find("Id").text(),Nome:$(this).find("Nome").text(),URL:$(this).find("Url").text()})}),i.lista_presente=o.loja_lista})},o.removeUrl=function(a,e){n.remove(i.id,a).then(function(a){o.loja_lista.splice(e,1),i.lista_presente=o.loja_lista})},o.adicionarUrl=function(){if(""!=o.loja_nome&&null!=o.loja_nome){var a='<ConfiguracaoLojaPresentes xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id>0</Id><Id_usuario_logado>'+i.id+"</Id_usuario_logado><Nome>"+o.loja_nome+"</Nome><Url>"+o.loja_url+"</Url></ConfiguracaoLojaPresentes>";n.setData(a).then(function(a){o.getPresentes(),o.loja_nome="",o.loja_url=""})}},o.getListaCardapio=function(){r.getData(i.id).then(function(a){var e=$.parseXML(a);i.lista_cardapio=[],$(e).find("Cardapio").each(function(){i.lista_cardapio.push({Id:$(this).find("Id").text(),Nome:$(this).find("Nome").text(),Descricao:$(this).find("Descricao").text()})}),o.lista_cardapio=i.lista_cardapio})},o.setCardapio=function(){if(""!=o.cardapio_descricao&&null!=o.cardapio_descricao){var a='<Cardapio xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Descricao>'+o.cardapio_descricao+"</Descricao><Id>0</Id><Id_usuario_logado>"+i.id+"</Id_usuario_logado><Nome>"+o.cardapio_title+"</Nome></Cardapio>";r.setData(a).then(function(a){o.getListaCardapio(),o.cardapio_title="",o.cardapio_descricao=""})}},o.removerCardapio=function(a,e){r.remove(i.id,a).then(function(a){i.lista_cardapio.splice(e,1),o.lista_cardapio=i.lista_cardapio})},""==i.recepcao.festa_igual_cerimonia||null==i.recepcao.festa_igual_cerimonia?l.getDadosServico():l.getDadosLocal()}]),angular.module("dashboard").controller("dados_casal",["$scope","Upload","DadosCasal","user","$cookies","$filter","$route","ServiceCasamento",function(o,a,e,t,n,i,r,s){var c=this;c.setLocalDados=function(){var a=o.data_casamento.getMonth()+1+"/"+o.data_casamento.getDate()+"/"+o.data_casamento.getFullYear();t.dadosCasal.nome_noivo=o.nome_noivo,t.dadosCasal.nome_noiva=o.nome_noiva,t.dadosCasal.data_casamento=a,n.putObject("user",t)},o.foto__editor="./image/user_login.png",o.selected={width:50,height:50,top:0,left:0},o.editar=!1,o.carregando=!1,o.openFile=function(a){var e=new FileReader;e.onload=function(){var a=e.result;o.foto__editor=a,o.editar=!0,o.selected.width=200,o.selected.height=200,o.selected.left=0,o.selected.top=0},e.readAsDataURL(a.files[0])},o.uploadFoto=function(){o.carregando=!0;var e=o.imageEditor.toDataURL({useOriginalImg:!0,imageType:"image/jpg"}),s=a.upload({url:"http://celebri.com.br/dashboard/teste.php",data:{image:e,name:t.id}});s.then(function(a){var e=t.foto.split("?"),s=new Date;t.foto=e[0]+"?"+i("date")(s,"H:mm","-0300"),o.foto=t.foto,o.carregando=!1,n.putObject("user",t),r.reload()})},c.getLocalDados=function(){o.nome_noivo=t.dadosCasal.nome_noivo,o.nome_noiva=t.dadosCasal.nome_noiva,o.data_casamento=new Date(t.dadosCasal.data_casamento),o.foto=t.foto},o.casalGetDados=function(){var a="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarDadosCadastroNoivos",e='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+t.id+"</Id_casal></IdentificaocaoCasal>";s.SendData(a,e).then(function(a){var e=$.parseXML(a);o.nome_noivo=$(e).find("NomeNoivo").text(),o.nome_noiva=$(e).find("NomeNoiva").text(),o.foto=t.foto;var n=$(e).find("DataCasamento").text().split("/");o.data_casamento=new Date("/"+n[1]+"/"+n[0]+"/"+n[2]),c.setLocalDados()})},o.setDadosCasal=function(){var a=o.data_casamento.getMonth()+1+"/"+o.data_casamento.getDate()+"/"+o.data_casamento.getFullYear(),n='<DadosCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+t.id+"</Id_casal><AtualizarSenha>false</AtualizarSenha><DataCasamento>"+a+"</DataCasamento><NomeNoiva>"+o.nome_noiva+"</NomeNoiva><NomeNoivo>"+o.nome_noivo+"</NomeNoivo><Senha></Senha></DadosCasal>";c.setLocalDados(),e.setData(n)},null==t.id?(t=n.getObject("user"),null==t.dadosCasal.nome_noiva||""==t.dadosCasal.nome_noiva?o.casalGetDados():c.getLocalDados()):null==t.dadosCasal.nome_noiva?o.casalGetDados():c.getLocalDados()}]),angular.module("dashboard").controller("enviar_convite",["$scope","Convite","user","$cookies","Convidados",function(o,a,e,t,n){o.carregando=!0,o.allowToSend=!1,o.mensagem=!1,o.convidado_lista=[],o.selecionados=[],o.checkAll=function(){o.selectedAll?(o.selectedAll=!0,o.allowToSend=!0):(o.selectedAll=!1,o.allowToSend=!1,o.selecionados=[]),angular.forEach(o.convidado_lista,function(a){a.Selected=o.selectedAll,o.selectedAll&&o.selecionados.push(a.Id);
})},o.checkConvidado=function(a,e){if(e)o.selecionados.push(a);else{var t=0;angular.forEach(o.selecionados,function(e){e==a&&o.selecionados.splice(t,1),t++})}o.selecionados.length>0?o.allowToSend=!0:o.allowToSend=!1},o.enviar=function(){var t='<ListaEmailConvidados xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento">  <Id_casal>'+e.id+"</Id_casal>  <Id_convidado>";angular.forEach(o.selecionados,function(o){t+='<int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+o+"</int>"}),t+="</Id_convidado></ListaEmailConvidados>",a.enviarEmail(t).then(function(a){o.mensagem=!0})},o.getConvidados=function(){e=t.getObject("user"),n.getData(e.id).then(function(a){var e=$.parseXML(a);$(e).find("Convidado").each(function(){var a="Enviado";"false"==$(this).find("ConviteEnviado").text()&&(a="Não Enviado"),o.convidado_lista.push({Id:$(this).find("Id").text(),Nome:$(this).find("Nome").text(),Email:$(this).find("Email").text(),ConviteEnviado:a})}),o.carregando=!1})},o.getConvidados(),o.senhaApp=e.senhaApp}]),angular.module("dashboard").controller("enviar_convite2",["$scope",function(o){}]),angular.module("dashboard").controller("estatistica",["$scope","user","EstatisticaServ","$cookies",function(o,a,e,t){o.getEstatistica=function(){a=t.getObject("user"),e.getData(a.id).then(function(a){var e=$.parseXML(a);o.total_convites_enviados=$(e).find("total_convites_enviados_cerimonia_e_festa").text(),o.total_convidados=$(e).find("total_convidados").text(),o.total_geral_convidados=$(e).find("total_geral_convidados").text(),o.total_confirmados=$(e).find("total_convidados_confirmados").text(),o.total_acompanhantes=$(e).find("total_acompanhantes").text(),o.convidados_geral_labels=["Convidados Direto","Acompanhantes"],o.convidados_geral_data=[o.total_convidados,o.total_acompanhantes]})},o.getEstatistica()}]),angular.module("dashboard").controller("login",["user","$location","$cookies","UserService","ipService","ServiceCasamento",function(o,a,e,t,n,i){var r=this;r.recuperarSenha=!1,r.carregando=!1,r.confirmacao=!1,r.nomeUsuario="",r.senhaUsuario="";var s=e.getObject("user");null!=s&&(o=s,a.path("/dados-do-casal")),r.autenticar=function(){r.carregando=!0,r.Result="true";var s="http://"+n.ip+"/ServiceCasamento.svc/AutenticacaoNoivos",c='<Autenticacao xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Email>'+r.nomeUsuario+"</Email><Senha>"+r.senhaUsuario+"</Senha></Autenticacao>";i.SendData(s,c).then(function(n){var i=$.parseXML(n),s=$(i).find("Result").text();if("true"==s){r.Result="true",r.ErrorMessage="",t.setData("ID",$(i).find("Id_usuario_logado").text()),o.id=$(i).find("Id_usuario_logado").text();var c=$(i).find("EmailNoivo").text();r.nomeUsuario==c?(t.setData("nomeUsuario",$(i).find("NomeNoivo").text()),t.setData("senhaApp",$(i).find("SenhaNoivoConvidado").text()),o.nomeUsuario=$(i).find("NomeNoivo").text(),o.senhaApp=$(i).find("SenhaNoivoConvidado").text()):(t.setData("nomeUsuario",$(i).find("NomeNoiva").text()),t.setData("senhaApp",$(i).find("SenhaNoivaConvidado").text()),o.nomeUsuario=$(i).find("NomeNoiva").text(),o.senhaApp=$(i).find("SenhaNoivaConvidado").text()),t.setData("nomeNoiva",$(i).find("NomeNoiva").text()),t.setData("nomeNoivo",$(i).find("NomeNoivo").text()),o.nome_noiva=$(i).find("NomeNoiva").text(),o.nome_noivo=$(i).find("NomeNoivo").text();var l=$(i).find("Url_foto").text();"NULL"==l?(t.setData("fotoUrl","image/user_login.png"),o.foto="image/user_login.png"):(t.setData("fotoUrl",$(i).find("Url_foto").text()+"?13:45"),o.foto=$(i).find("Url_foto").text(),o.foto+="?13:45"),e.putObject("user",o),a.path("/dados-do-casal")}else r.carregando=!1,r.Result=s,r.ErrorMessage=$(i).find("ErrorMessage").text()})},r.enviarEmail=function(){r.carregando=!0,r.Result="true";var o="http://"+n.ip+"/ServiceCasamento.svc/EnviarEmailRecuperacaoSenha",a='<EmailCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Email>'+r.recEmail+"</Email></EmailCasal>";i.SendData(o,a).then(function(o){var a=$.parseXML(o),e=$(a).find("Result").text();"false"==e?(r.ErrorMessage="E-mail não encontrado na nossa base de dados.",r.Result=e):r.confirmacao=!0,r.carregando=!1})}}]),angular.module("dashboard").controller("mainController",["$scope","$location","user","$cookies",function(o,a,e,t){o.checkTemplate=function(){var n=t.getObject("user");"/login"==a.path()?(o.login="login",o.cabecalho=""):(null!=n&&(e=n),o.login="",o.cabecalho="templates/parts/sidebar.html")},o.getTimes=function(o){return new Array(o)}}]),angular.module("dashboard").controller("save_date",["$scope","user","SaveTheDate","$cookies",function(o,a,e,t){o.salvar=function(){var n='<DadosFormatacaoSaveTheDate xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento">  <ErrorMessage></ErrorMessage>  <Result>true</Result>  <id_casal>'+a.id+"</id_casal>  <id_modelo>"+o.modelo+"</id_modelo>  <msg>"+o.mensagem+"</msg>  <nomecasal>"+a.dadosCasal.nome_noiva+" e "+a.dadosCasal.nome_noivo+"</nomecasal></DadosFormatacaoSaveTheDate>";a.saveDate.modelo=o.modelo,a.saveDate.mensagem=o.mensagem,t.putObject("user",a),e.setData(n).then(function(o){})},o.getData=function(){e.getData(a.id).then(function(e){var n=$.parseXML(e);if(o.modelo=$(n).find("id_modelo").text(),o.mensagem=$(n).find("msg").text(),0==o.modelo){o.modelo=1,null==a.id&&(a=t.getObject("user"));try{var i=a.dadosCasal.data_casamento.split("/"),r=i[1]+"/"+i[0]+"/"+i[2]}catch(s){var r="00/00/0000"}o.mensagem="Em momentos especiais como este, não tinha como não lembrarmos de você! Dia "+r+" é um dia marcante para nós, o dia do nosso casamento e gostaríamos de compartilhar este momento com você. Marque esta data no seu calendário para não se esquecer. A sua participação é muito importante para nós! \r\n Em breve você receberá por e-mail, o convite do nosso casamento.",o.salvar()}else a.saveDate.modelo=o.modelo,a.saveDate.mensagem=o.mensagem,t.putObject("user",a)})},a=t.getObject("user"),null==a.saveDate.modelo?o.getData():(o.modelo=a.saveDate.modelo,o.mensagem=a.saveDate.mensagem)}]),angular.module("dashboard").controller("save_date2",["$scope","user","$cookies","SaveTheDate","Convidados",function(o,a,e,t,n){o.selectedAll=!1,o.allowToSend=!1,o.selecionados=[],o.checkAll=function(){o.selectedAll?(o.selectedAll=!0,o.allowToSend=!0):(o.selectedAll=!1,o.allowToSend=!1,o.selecionados=[]),angular.forEach(o.convidado_lista,function(a){a.Selected=o.selectedAll,o.selectedAll&&o.selecionados.push(a.Id)})},o.checkConvidado=function(a,e,t){if(t)o.selecionados.push(e);else{var n=0;angular.forEach(o.selecionados,function(a){a==e&&o.selecionados.splice(n,1),n++})}o.selecionados.length>0?o.allowToSend=!0:o.allowToSend=!1},o.enviar=function(){var e='<ListaEmailConvidados xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento">  <Id_casal>'+a.id+"</Id_casal>  <Id_convidado>";angular.forEach(o.selecionados,function(o){e+='<int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+o+"</int>"}),e+="</Id_convidado></ListaEmailConvidados>",t.enviarEmail(e)},o.getConvidados=function(){null==a.id&&(a=e.getObject("user")),n.getData(a.id).then(function(a){var e=$.parseXML(a);o.convidado_lista=[],$(e).find("Convidado").each(function(){o.convidado_lista.push({Id:$(this).find("Id").text(),nome:$(this).find("Nome").text(),email:$(this).find("Email").text(),Selected:!1})})})},o.getConvidados()}]),angular.module("dashboard").controller("sidebar",["$scope","$location","$cookies","user",function(o,a,e,t){null==t.id?(t=e.getObject("user"),o.fotoCasal=t.foto,o.usuarioLogado=t.nomeUsuario):(o.fotoCasal=t.foto,o.usuarioLogado=t.nomeUsuario),o.isActive=function(o){var e=!1;return o!=a.path()&&o+"/2"!=a.path()||(e=!0),e},o.sair=function(){e.remove("user"),t=null,a.path("/login")},o.menu=[{Id:1,Name:"Dados do Casal",url:"dados-do-casal"},{Id:2,Name:"Configurar Convite",url:"configurar-convite"},{Id:3,Name:"Configurar Evento",url:"configurar-evento"},{Id:4,Name:"Cadastrar Convidados",url:"cadastrar-convidados"},{Id:5,Name:"Save the Date",url:"save-the-date"},{Id:6,Name:"Enviar Convite",url:"enviar-convite"},{Id:7,Name:"Estatísticas do Convite",url:"estatisticas"}]}]),angular.module("dashboard").factory("Cardapio",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarCardapio",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e,t){var n="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ExcluirCardapio",i='<ListaRegistrosExcluir xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+'</Id_casal><Id_registro><int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+t+"</int></Id_registro></ListaRegistrosExcluir>",r=o.resposta(n,i),s=a.defer();return r.success(function(o){s.resolve(o)}).error(function(){s.reject(arguments)}),s.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/CadastrarCardapio",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,remove:t,setData:n}}]),angular.module("dashboard").factory("ConfiguracaoConvite",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConfiguracaoConvite",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfiguracaoConvite",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,setData:t}}]),angular.module("dashboard").factory("ConfiguracaoEvento",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConfiguracaoEvento",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfiguracaoEvento",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,setData:t}}]),angular.module("dashboard").factory("ConfiguracaoTemplateConvite",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarFormatacaoConvite",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/FormatacaoConvite",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,setData:t}}]),angular.module("dashboard").factory("Convidados",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConvidados",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento">  <Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e,t){var n="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ExcluirConvidados",i='<ListaRegistrosExcluir xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+'</Id_casal><Id_registro><int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+t+"</int></Id_registro></ListaRegistrosExcluir>",r=o.resposta(n,i),s=a.defer();return r.success(function(o){s.resolve(o)}).error(function(){s.reject(arguments)}),s.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/CadastroConvidados",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,remove:t,setData:n}}]),angular.module("dashboard").factory("Convite",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/EnvioEmailConvite",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{enviarEmail:e}}]),angular.module("dashboard").factory("DadosCasal",["CallAjax","$q",function(o,a){var e="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarDadosCadastroNoivos",t=function(t){var n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+t+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(e,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/AtualizarDadosCadastroNoivos",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:t,setData:n}}]),angular.module("dashboard").factory("EstatisticaServ",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarEstatisticaCasamento",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise};return{getData:e}}]),angular.module("dashboard").factory("ListaHoteis",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConfiguracaoListaHoteis",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e,t){var n="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ExcluirHoteis",i='<ListaRegistrosExcluir xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+'</Id_casal><Id_registro><int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+t+"</int></Id_registro></ListaRegistrosExcluir>",r=o.resposta(n,i),s=a.defer();return r.success(function(o){s.resolve(o)}).error(function(){s.reject(arguments)}),s.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfigAdicionalEvento_ListaHoteis",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,remove:t,setData:n}}]),angular.module("dashboard").factory("ListaSaloes",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConfiguracaoListaSaloes",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e,t){var n="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ExcluirSaloes",i='<ListaRegistrosExcluir xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+'</Id_casal><Id_registro><int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+t+"</int></Id_registro></ListaRegistrosExcluir>",r=o.resposta(n,i),s=a.defer();return r.success(function(o){s.resolve(o)}).error(function(){s.reject(arguments)}),s.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfigAdicionalEvento_ListaSaloes",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,remove:t,setData:n}}]),angular.module("dashboard").factory("LojaPresentes",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarConfiguracaoLojaPresentes",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e,t){var n="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ExcluirLojasPresentes",i='<ListaRegistrosExcluir xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+'</Id_casal><Id_registro><int xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays">'+t+"</int></Id_registro></ListaRegistrosExcluir>",r=o.resposta(n,i),s=a.defer();return r.success(function(o){s.resolve(o)}).error(function(){s.reject(arguments)}),s.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfigAdicionalEvento_LojaPresentes",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,remove:t,setData:n}}]),angular.module("dashboard").factory("PresentesLuaDeMel",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarTodosProdutosLuaDeMel",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/ConfigurarPresentesEscolhidos",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,setData:t}}]),angular.module("dashboard").factory("SaveTheDate",["CallAjax","$q",function(o,a){var e=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/RetornarFormatacaoSaveTheDate",n='<IdentificaocaoCasal xmlns="http://schemas.datacontract.org/2004/07/WcfServiceCasamento"><Id_casal>'+e+"</Id_casal></IdentificaocaoCasal>",i=o.resposta(t,n),r=a.defer();return i.success(function(o){r.resolve(o)}).error(function(){r.reject(arguments)}),r.promise},t=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/FormatacaoSaveTheDate",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise},n=function(e){var t="http://23.238.16.114/celebri_dev/ServiceCasamento.svc/EnvioEmailSaveTheDate",n=o.resposta(t,e),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{getData:e,setData:t,enviarEmail:n}}]),angular.module("dashboard").factory("ServiceCasamento",["CallAjax","$q",function(o,a){var e=function(e,t){var n=o.resposta(e,t),i=a.defer();return n.success(function(o){i.resolve(o)}).error(function(){i.reject(arguments)}),i.promise};return{SendData:e}}]),angular.module("dashboard").factory("UserService",function(){var o={ID:"",nomeUsuario:"",fotoUrl:"",senhaApp:"",nomeNoiva:"",nomeNoivo:"",dataCasamento:""};return{setData:function(a,e){o[a]=e},getData:function(a){return o[a]},user:function(){return o}}}),angular.module("dashboard").filter("twoDigits",function(){return function(o){var a=parseInt(o,10);return isNaN(a)?o:(1>a/10&&(a="0"+a),a)}}),angular.module("dashboard").service("CallAjax",["ipService",function(o){return{resposta:function(a,e){var t={uri:a,xml:e},n=$.ajax({type:"POST",url:"http://"+o.ip+"/web/service_request.aspx",contentType:"text/xml; charset=utf-8",data:t,xhrFields:{withCredentials:!0},headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}});return n}}}]),angular.module("dashboard").service("ipService",function(){return{ip:"23.238.16.114/celebri_dev"}}),angular.module("dashboard").service("PromiseUtils",["$q",function(o){return{getPromiseHttpResult:function(a){var e=o.defer();return a.success(function(o){e.resolve(o)}).error(function(){e.reject(arguments)}),e.promise}}}]);